!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.arcText=i()}(this,function(){"use strict";function a(t){var i=t.getBoundingClientRect();return{height:i.height,left:i.left+window.pageXOffset,top:i.top+window.pageYOffset,width:i.width}}function r(t,i){return t*(1-Math.cos(d(i/2)))}function u(t,n){return t.reduce(function(t,i){var e=function(t){return t*s}(i.width/n);return{"θ":t.θ+e,rotations:t.rotations.concat([t.θ+e/2])}},{"θ":0,rotations:[]})}var i=Math.PI/180,s=180/Math.PI,d=function(t){return t*i},c=Math.PI,e=Math.max,f=Math.min;function t(t,i){void 0===i&&(i=void 0),this.element=t,this.originalHTML=this.element.innerHTML;var e=document.createElement("div"),n=document.createDocumentFragment();e.setAttribute("aria-label",this.element.innerText),e.style.position="relative",this.container=e,this.letters=function(t,i){var e=document.createElement("span"),n=t.innerText.trim();return(i?i(n):n.split("").slice()).map(function(t){var i=e.cloneNode();return i.insertAdjacentHTML("afterbegin"," "===t?"&nbsp;":t),i})}(this.element,i),this.letters.forEach(function(t){return n.appendChild(t)}),e.appendChild(n),this.element.innerHTML="",this.element.appendChild(e);var r=window.getComputedStyle(this.element),s=r.fontSize,o=r.lineHeight;this.fontSize=parseFloat(s),this.lineHeight=parseFloat(o)||this.fontSize,this.metrics=this.letters.map(a);var h=this.metrics.reduce(function(t,i){return t+i.width},0);this.minRadius=h/c/2+this.lineHeight,this.dir=1,this.isForceWidth=!1,this.isForceHeight=!0,this.radius=this.minRadius,this.invalidate()}return t.prototype.forceWidth=function(t){return t?(this.isForceWidth=t,this.invalidate(),this):this.isForceWidth},t.prototype.forceHeight=function(t){return t?(this.isForceHeight=t,this.invalidate(),this):this.isForceHeight},t.prototype.direction=function(t){return t?(this.dir=t,this.invalidate(),this):this.dir},t.prototype.arc=function(t){return t?(this.radius=e(this.minRadius,t),this.invalidate(),this):this.radius},t.prototype.destroy=function(){return this.element.innerHTML=this.originalHTML,this},t.prototype.refresh=function(){return this.invalidate()},t.prototype.invalidate=function(){var t=this;return cancelAnimationFrame(this.raf),this.raf=requestAnimationFrame(function(){t.render()}),this},t.prototype.render=function(){var s=this,o="center "+(-1===this.dir?-this.radius+this.lineHeight:this.radius)/this.fontSize+"em",t=this.radius-this.lineHeight,i=u(this.metrics,t),h=i.rotations,a=i.θ;if(this.letters.forEach(function(t,i){var e=t.style,n=(-.5*a+h[i])*s.dir,r="translateX("+-.5*s.metrics[i].width/s.fontSize+"em) rotate("+n+"deg)";e.position="absolute",e.bottom=-1===s.dir?"0":"auto",e.left="50%",e.transform=r,e.transformOrigin=o}),this.isForceHeight){var e=180<a?r(this.radius,a):r(t,a)+this.lineHeight;this.container.style.height=e/this.fontSize+"em"}if(this.isForceWidth){var n=function(t,i){return 2*t*Math.sin(d(i/2))}(this.radius,f(180,a));this.container.style.width=n/this.fontSize+"em"}return this},t});
